<script type="text/javascript">

    //Variables :
    // 1 - Position du personnage :
    var posX=250;
    var lastPosX = 250;
    var posY=250;
    var lastPosY = 250;

    // 2 - Taille de la carte :
    var mapSizeX = 600;
    var mapSizeY = 400;

    // 3 - Taille de la bordure de la carte :
    var mapBorder = 40;

    // 4 - Vitesse du personnage :
    var PnjSpeed = 5;


    // Quand on lache les touches :
document.onkeyup = function(event) {
    var nao = document.getElementById('nao');
    var key_pressed; 
    if(event == null){
         key_pressed = window.event.keyCode; 
    }
    else {
         key_pressed = event.keyCode; 
    }
    switch(key_pressed){
         case 37:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posX=posX-PnjSpeed;
              lastPosX = posX;
              context.drawImage(base_image, posX, lastPosY);
              break; 
         case 38:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posY=posY-PnjSpeed;
              lastPosY = posY;
              context.drawImage(base_image, lastPosX, posY);
              break; 
         case 39:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posX=posX+PnjSpeed;
              lastPosX = posX;
              context.drawImage(base_image, posX, lastPosY);
              break;
         case 40:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posY=posY+PnjSpeed;
              lastPosY = posY;
              context.drawImage(base_image, lastPosX, posY);
              break; 
    } 
}


// Quand on presse les touches :
document.onkeydown = function(event) {
     var key_pressed; 
     if(event == null){
          key_pressed = window.event.keyCode; 
     }
     else {
          key_pressed = event.keyCode; 
     }
     switch(key_pressed){
          case 37:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posX < 0 ) { posX = 0 } // empeche le nao de sortir à gauche
               posX=posX-PnjSpeed;
               lastPosX = posX;
               context.drawImage(base_image, posX, lastPosY);
               break; 
          case 38:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posY < 4 ) { posY = 4 } // empeche le nao de sortir en haut
               posY=posY-PnjSpeed;
               lastPosY = posY;
               context.drawImage(base_image, lastPosX, posY);
               break; 
          case 39:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posX > 468 ) { posX = 468 } // empeche le nao de sortir à droite
               posX=posX+PnjSpeed;
               lastPosX = posX;
               context.drawImage(base_image, posX, lastPosY);
               break;
          case 40:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posY > 464 ) { posY = 464 }  // empeche le nao de sortir en bas
               posY=posY+PnjSpeed;
               lastPosY = posY;
               context.drawImage(base_image, lastPosX, posY);
               break; 
     } 
}
 
var context;
var left=false;
var right=false;
var up=false;
var down=false;
 
function on_enter_frame(){
    context=game_area.getContext('2d');
    context.clearRect(0,0,mapSizeX,mapSizeY);
    context.beginPath();
    context.fillStyle="#000000";
    base_image = new Image();
    base_image.src = 'nao.png';
    context.closePath();
    context.fill();
    context.drawImage(base_image, posX, posY);
    x+=x_speed;
    y+=y_speed;
    x_speed*=0.80;
    y_speed*=0.80;
}
 
setInterval(on_enter_frame,30);
 
</script>
 
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#game_area{
     background-color:#f5f5f5;
     border:1px solid #e5e5e5;
}
</style>
</head>
<body>
     <canvas id="game_area" width="500" height="500"> </canvas> 
</body>
</html>