<script type="text/javascript">
    //Variables :
    // 1 - Taille de la carte :
    var mapSizeX = 600;
    var mapSizeY = 400;
    // 2 - Taille de la bordure de la carte :
    var mapBorder = 35;
    // 3 - Position du personnage :
    var posX = mapSizeX / 2;
    var lastPosX = posX;
    var posY= mapSizeY / 2;
    var lastPosY = posY;
    // 4 - Vitesse du personnage :
    var PnjSpeed = 5;
    // Quand on lache les touches :
document.onkeyup = function(event) {
    var nao = document.getElementById('nao');
    var key_pressed; 
    if(event == null){
         key_pressed = window.event.keyCode; 
    }
    else {
         key_pressed = event.keyCode; 
    }
    switch(key_pressed){
         case 37:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posX=posX-PnjSpeed;
              lastPosX = posX;
              context.drawImage(base_image, posX, lastPosY);
              break; 
         case 38:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posY=posY-PnjSpeed;
              lastPosY = posY;
              context.drawImage(base_image, lastPosX, posY);
              break; 
         case 39:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posX=posX+PnjSpeed;
              lastPosX = posX;
              context.drawImage(base_image, posX, lastPosY);
              break;
         case 40:
              nao.style.visibility='visible';
              context.clearRect(0,0,mapSizeX,mapSizeY);
              posY=posY+PnjSpeed;
              lastPosY = posY;
              context.drawImage(base_image, lastPosX, posY);
              break; 
    } 
}
// Quand on presse les touches :
document.onkeydown = function(event) {
     var key_pressed; 
     if(event == null){
          key_pressed = window.event.keyCode; 
     }
     else {
          key_pressed = event.keyCode; 
     }
     switch(key_pressed){
          case 37:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posX < 5 ) { posX = 5 } // empeche le nao de sortir à gauche
               posX=posX-PnjSpeed;
               lastPosX = posX;
               context.drawImage(base_image, posX, lastPosY);
               break; 
          case 38:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posY < 8 ) { posY = 8 } // empeche le nao de sortir en haut
               posY=posY-PnjSpeed;
               lastPosY = posY;
               context.drawImage(base_image, lastPosX, posY);
               break; 
          case 39:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posX > mapSizeX - mapBorder ) { posX = mapSizeX - mapBorder } // empeche le nao de sortir à droite
               posX=posX+PnjSpeed;
               lastPosX = posX;
               context.drawImage(base_image, posX, lastPosY);
               break;
          case 40:
               context.clearRect(0,0,mapSizeX,mapSizeY);
               if ( posY > mapSizeY - mapBorder - 5 ) { posY = mapSizeY - mapBorder - 5 }  // empeche le nao de sortir en bas
               posY=posY+PnjSpeed;
               lastPosY = posY;
               context.drawImage(base_image, lastPosX, posY);
               break; 
     } 
}
 
var context;
var left=false;
var right=false;
var up=false;
var down=false;
 
function on_enter_frame(){
    context=game_area.getContext('2d');
    context.clearRect(0,0,mapSizeX,mapSizeY);
    context.beginPath();
    context.fillStyle="#000000";
    base_image = new Image();
    base_image.src = 'nao.png';
    context.closePath();
    context.fill();
    context.drawImage(base_image, posX, posY);
}
 
setInterval(on_enter_frame,30);
</script>
 
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#game_area{
     background-color:#f5f5f5;
     border:3px solid #878585;
     position: absolute;
}
#line{
  position: absolute;
  }
</style>
</head>
<body>

  <div>
     <canvas id="game_area" width="600" height="400"> </canvas>
     <svg id="line" height="210" width="500">
       <line x1="0" y1="0" x2="200" y2="200" style="stroke:rgb(169,169,169);stroke-width:2" />
    </svg> 
  </div>
      
</body>
</html>